<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Times New Roman" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/309091 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Times New Roman;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="10134"/>
<h1>Documentation: DOCKER 101</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>9/2/2020 9:44 AM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>9/15/2020 12:25 PM</i></td></tr>
<tr><td><b>Author:</b></td><td><i>Zafrin Dhali</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><div><div><div><br/></div><div style="text-align: center;"><img alt="Empowering App Development for Developers | Docker" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPMAAADPCAMAAAAXkBfbAAAA6lBMVEX///8JnOwGbaUJlOAAaaMAa6QAZqEGb6gIkNoGaqEJmOYefK7y8vIZfbQTm+YJn/EVdKltmr4hisMVld0AYp+SutPd7PMIh8zm8fdhk7o6gLChvNMseqzQ4OsHfr8GdLAthbR6osMfltgejcsHebcIitHx9/oAl+umv9VqpccHg8a0z+CoyNzF2ebU5u+Fsc6bwdhNXGR0qspMjrkAXZ3O6vqb1fZNkrt3g4lHq+xwvvI+jbpdkLm41uVJs/CdpquvtLeIzfXIztA9T1iLlJnc4OFTYWl7v+3C4/mr2fUlpe2TweSRss1bnMFMladuAAARZ0lEQVR4nO2di3baSLaGoVRVApEOokeATLj5DCgNSEiBpOmEMNPTPX36dCa8/+ucuupasgFjCY/1r5UsWy4Kfdp12XurVKrVKlWqVKlSpUqVKlWqVKlSpUqVKpUpe6rSouzTelb1MMoKfy37tJ5VPYRARvCu7NN6VvUI8v8k9ffmK2Bu1+NqN14Js0FgDYP/eyXMDaDVjcmyXV/q7dfCPG826oY+btfHzVfD3KiYK+b/OlXMr4n5VY7bEzI/z/r1en/2apiZH8b0GvwwmzG324Rb/HvR/vaqe4J8wvz3pH5EL5bZ6WD4uBTR8wuOn50OBKiZEAVUHGqmD71o5h9+TEoHKHXkR8KcOvLDS27bsNloJ1SfgGY9ecggzMkjp4xho/2oEIZzxZjJSMxyH/yfQZgN8Zs8BNhcJX5j/53AvMBm1ymE4jxxZmO8JJ7GpF7XJg3BbMzm9fqSOF3ziSGYz/RJVhZAcNorhuMcCWadUCyZRzkXzFqz3zZmerveb0rm83xPu0VHPmi6BZGcLsE8GUvm0M6MeRJnPi/G8CEA4yZA4Oagn43ZI1aetxtkDoBBUTAn6tmYFxjMjDqDBquiaE7TczHbFjEzHeIbEwK9LoznFD0XcxeDCU/+azqAe7swoBMkmWcnMJ8zbn+FzWVb3PEgo7dfGNAJituZpe1DZkAmYsYMQjufntNfD1FTk9F2HwDrllq38MM0coJGg/4zpB9GfooOM2Yjfuhh5hUAenhvi1QId8UhPa576m8nbr8J5sQhcOY9up8wGEeFG02ge8UhJWWP0vLuULP/t6QIc+rI3whz6ki/CbfrTHVirHLIlZzHLtAM4PuymLvATIvQZA+hE0qh7CETvBPMOwhizGT0Q9Oyhm4yg6RXSNCMR/aQotTjhRDA3wXzFuqNZHeBZcWVhNn8ISkdgB8ePwRUh/TUETNi3qMEc30McFkeaBej5dukZqA5Tx5h/Tl1iDCnPjdvglnq0LIpmUlMNdFiyO0lQLtg07mj6myCQ4FhdRdLTyGM/8egKS2SzRnIw7GcgTxExuJZPI1A5+GQmfTnpJ3npCdgmW3E2PrY8kcFcXPmBhletD6ZiPsNyTynMy5xQoy+Jn0S8pMoKZnpZ8KSnFl+pj6fP8hMQo0ojcjGAowWxfgpnJlmAubETTIA+YUxX+RvA+avkovSnLeNCSsZMh8TcxVl1vXZeDmnWo5nus7SCYV08aKYaz75ojiz1p9rhiZlaI3ljNr6WEDmqDBmF4JZnDniDUW8cGQV4J1x5vHzM3vEZYn7r1lkzZgB2ClgHCvMzrUtcWnbD5lZIyEmKiKBUhyzL3MGeWbWZgBNi5iuimN2IKABeL6ZlySoLiTWEsxAMDdDZprfHp+Z336QubaBQNfyzUwmbHwsAjnlkzD/4kGfZP6YT6KpfZIaHcXCtIHKzDpAgyJ9koRivqdsiafkDKTvGVfEbB98nXhbwtAKK0/I5FxQBjiHWZEnSRxqK/MkaeY2YSbxs+11OwOddOemCDMyZjbmxA2zus+LujZbXCZA8kcpMpGmD5EzSh1pAdUhPV0VzSJ8tCwMEUBgMm+rkecz+udnRq4F1oMJgtMOnfg5Hkvo44bsHkkTa/Mx+RiEz34Ta4OJUQrTZLaMxc7MzA32X2O+nLHgAm2fP2mygGBMAppGEdIMtqQqFHM/9AmRTsJISoy3Rdyp/EoiO0NLjcXFiJqZDFmi9UNsWXuvkGwgZdY07fEzvL6El2m2hsPhYNvxC8sKlcdMzUyCCT1Yj0brXpGLS0pjpsjGGKFt8UtpBHPxHZrNT6CUPG9ZzMzMJIBCJayYWsDmsgRmQ7jWuIy7zxuMxiUwizgZmWWsEfPpepbCBzEZNJazyMAtg5m1bGPcRINSlgJ6FtCNghs3D6eIC4afO4JSy/kI9EbBzLxlExesVQpyrUaiGTpZFdi4uZn7BeVzVdojsCyUmSMbZAC7K2s1cxeDcZHMIjcyJqFjaYukPAwmZ3To92//8fb9U5hFEgiU445wrU0ETvc+P39yHOfTP56KTDwwuC9vnT5d+dY/tXF/IeXpqX55GrI2awKztFVhRF0IZtpphv72qTb65Zd/vqnZ3y5DFp2ZrngsdZmnp4OmdpKh33+pvfnw4fdfyYf+dVGfFshzupy3TORabYBYaPW4od//XPvt9w8f/v3HH7WfL2GW6ewJKMnpjLSBYHKSoQXzh//99SJmiTxDoPTl+TYE+kmuGGnbDmX+/Y9L2rZEHgNUkp8d1w5yt+TRxv2tV/vtl99/+e2SMUwgG8QZwTew0xZ9DqZxkqH/5HOq8+elyPR+Or67gccR7C3iQfTjo9iXT7Ztf/pydsvWwoYNYGnLeBMKsDD049BvP3/+fL7zKRv2ki53u5GnQ1uI+yW5rftJ4bWRsPKtPH7hYhFFK9na2niiOn4mMh2+oHkryHQRppijFdDamHhq/ezxM5GZlQc30rCpRiZojrPQ7bo2J/EAQNb284XIkrgxIyP29masTEXvvc+NeJdut9vacjaht4Ut03V+fpKRjcakSZBv7InnKQTNybg/n8+5WfrLCaDLqRE2d+xG+PkTVGy9SF8nl25za0+2e0MkV47ruh4uH7em30UXPN/3CpEbtCuDm3pIkCuASK6Wh3QpC/nV3PuxG8P/9/ZSI0/ogF12WKGUT7o0+LodUG3v7v0g/VjEXxcRN8ZkEIS7G+vKQs6RQG9G7Ak49X3//5zapY0Q2SBGRhDf5CYVVM4CA3jXe8OlKnFaCBlb6jZn4/5tTVEpEUvD7ehp0DFiOnYhiIJbNTITbd5wsHqTT/1I8zYSxHSCwrsbcr3U8hFCHzeyfSuw//qWTx1fv0kXMhIjb29yuE4p0CHCW/fNmzzsT2rouIXJ9DTTEfHfWqubbtah1lNIZufjKEb9JnHmdjqjn8SljZqNXHDgvgxiIsc3CTU6em9SCkv89fk9JWXSUmosZ03aqPHdyyGmGu0tCLB5t3LS2EK9P9+nWelcbBAL69xl3XkvipjqsAXE1tg8eus86m8p+877M9BkwOa2/FzuJXJWRwvT1bbT+3eHXk1B/ek/395z62rz/pgEnRwY77+/PBNLOaOFidguh+ZwuwgOdtbWP3+eL0mIzR5lJV2YlNx3C12t+gxy3PsBxHJ1td7a73YLn2qz2+2mrRYWIScdsmDrzl/dRBb3yep53T226HPoDJ0+iY75U+liqTm9Grh1dL2XbuCURoFPYswh3ZYDc0G6Q8eQxpyL7uE2w8QryLE9b7Va/cTlkh+9Ue+/oy1XqlSpUqVKlSpVqlTpKlpf+Wlj27v1AMs+Ds3h4YoVBgNzeAML/B7SHqOrrtXyPiKArM3V6nsGORbN6eB3V6vwnqYR0OCWkyW9azN3OPMtZxEq5iuoYr5JVcxXUMV8k6qYr6CK+Sb1OpjFSwJEvJfH3EuUypHDSnnrOGAus7NW1CZqGCmKk3pjH818z+nqBZ1ti+3lP+106SkomXvdzpTv+L/vdHO/aN2927NCrW0nWieTx+x1huYgtRPa2r+bhjUkP+EcTb3Fl2Yc7r+2RKn787dS6y3Y/WL+GkTy026tYh7tQPjqRHqn+agMNL0tvfnMC5FS+sJ+iNn2EakSwviCz9EexWpAYBP/DF1nC/Gq5qym4Ysc6fdMz4t6ne8mTrwFknyR7+EUs+0DCBKlMMiuxrU36TdKYpMv51Qye1PML3S0Xr2XraEV7S3lDNkbzDbrbfKUAWyd08DtY+rjrIoBSDL39jBTCMBj6otG6VNhVjjmMDsbU1QaMa8H2bdwouipBZsxg+EwczbWGYso16YCRmw8GTHnlIKtxPCzQqpSCO8cFbNnYlkEyySUq6wBYPk+PsEMslY6g7k3FV9C18HQRREoXp1kJldfXSrxckBPR6lS8lcvy2wvwhOHoZnzagBYbBcnmcPLSUX3OYXw5ASjvQthhruu6/rHYbzbCmanJUuB4dF33e5uGEJvQ4r1QB4Dg2N3FZC6xDlTG6SYV2HrRDDcsnM9DGsYLrpu4O9kDQAfnQwzNLcbUmqzNdE5LxXwRfPCAzknOO4ubHKSeSFLbeXcY7tbcc44TOttsbwMcrVur8suFgJpO687Yb+Hpi87qyMNAHdhDYG43OJ1fDFmpPvhtXKD01f6r8VX40WsnzkbK8ns6fw3K/4AlL2wxNIv8c2uJZpbfDTv7S0IrW2qP7steVmRFZtkXCyaXLyGtRhiEXASzFi/8IEGcWFR6tGmVYLZ4V0+87bHrpjQ7+KtDpmpnLh795W1hIiZXIfwxIfxlZ/ioqXfV+VDYZc4M9xdmEGlm3sD1SvfulaM2eO/ZHeA3vCT4Ulwl5+MnucRhczdcApA+C5uq0CYOVMD71pouI6N2xc/GP6dV5bdQlP2LMa8YD+rdgzZsxNgGwPRJ2dpqdw7FYL5sItcOTP58MkdVBuAPWdP/xJEzNald1gcfs6qz4sWwJj516jekHbg14y+w6BnsmcJYe7l78ixSBoZpByaEfseZeTFOzp9JYZgzr+0j8nmX24q/uR8RZKZ46s382rxUg7bfoqWyt/bv5NyNsz0oxgrNl8T166X0RrIyyGZL35yZWSFTTOjbuhvu/xclMvMeSn64gbeGR/Y6D7FnO0qP8lRO/ed8GZPMD9hmxr3gfOMYowAqUeWWClXdno9/1zSdoaLlJ2lq5B5bRuS/o81EsywcylybYVFTQpFsWSXuxXK2ZDP3HTbGM78wBakEbMYedODlR+5QjmKmC9/E+FpzGxwz2M2z2ZGImQD4GOyuxTD7D7AvA6ZA25n5eTgsWZHmY8nMkMc9DaCLvnI86PMKOzPT2DmzoZ6QyM+JtFezJ0NpPTh+bhDJ7vuA9cvzkwfgXV2onkn9oJ7J8YwnCP2qvMnM9tsQIRT1d9EWyU0Bz3/a7jr8rHH3joP4gGHmhkNWUNwtnKyjvWYFfdw9+/yRK/n05n59GopvAAe1XF3j/VZ9mOmAj6LmNQn4S/CUM31cWbhcdgiTo6H33xsQNuHT/mpzLX7XEeCdzn4lf7Mjana4CrmbwrT5W+Lnoyfe8KHxJHf7EQeZr6ezsxdn0zARK45NyAn4EEighnnk39cOEXfo0BAqVTOwDMFdOTf8UEMPvjOoqcz2wMR/6WGnpE4Ich+c3gXyOCI00b87eMix5F5gZhzOLC/p3NDK+FdRfk9vmyHtPd0DV704N3TmcM4P7mZpszbyBE9ENPMIDG3iLbAvDAqMQPh5MZQgW5Z8KBgJj4tVzTuiXQMTL7exSU1tOT5XYG5JjKAyIw8QceXVpYnaMthVvejUhs5DMlhS45LaBg5WOsFvTDMPc7mPX2RAAl7cK8lqoxlEniqMNzU9RrM8msAhMcVDWG8nYz2YvmKtfR4MTh6tNTqCGXqKnJDDsJwCOsbXmrPwwNl3rMm58PY3L8KazA3I1bDTgQYH+XlvwJzOJaQy20h09St0C2OD6BumHljpZAVJmHje2QHYWIPW7ppQlmKDX+qnP5Cth9ZSddS1xDOp1dhrrkw5fyLn5OOVze6u4BiBRFODPlJ9zG6TjQfrLp3E3YaUx72lSn9aFy7DnPtkL0PQmpN57VcXVVqmCoVKG4wAMw2QlPer5KJ88j/DVBuDVdkrq2nVup7EJ5mQorDIH0rKpGnFfJAqhRCeMcGcvV9ydEgnQRzzWwN+3DMuBZzzQkGMGZFCIfKsMMfxm4mIQgHKo/J9oc4XgrJe8sBnRbxLl2ejyf4EK/BjN+ZjGpgYr3hKi/BsYOOaWH+Hm1zF+REhD13Z7JHnSEpdQxy0n3r7g6JurDZibJeU/p7Nu466OQ7F/k1LJLbW3gmKX6ldx05tucuFotN8OCz2U5vFGxIMXdkP1jK67K6EttP2e7CV13Mkb/J7Mwia3CzG1j1/IV7aW67UqVKlSpVqlSpUqVKlSpVqlTpter/AdgLFcBNMGjXAAAAAElFTkSuQmCC"></img>                                                                                                                                                                                                                <img src="Documentation DOCKER 101_files/Image.png" type="image/png" data-filename="Image.png" width="212"/>          </div><div style="text-align: center;"><span style="font-weight: bold; font-size: 24pt;">Documentation: Docker 101</span></div><div style="text-align: center;"><span style="font-weight: bold; font-size: 24pt;">Under the Hood, Dockerfile + Compose , Best Practices</span></div><hr/><div><a href="https://youtu.be/fqMOX6JJhGo" style="font-weight: bold; font-size: 16pt;">Docker Tutorial for Beginners- Full DevOps Course </a></div><ul><li><div>Compatibility issues with multiple services </div></li><ul><li><div>each service may require a different version of the same dependency library </div></li><ul><li><div>solution : run each service in a separate container to </div></li></ul></ul><li><div>Container</div></li><ul><li><div>Isolated environments like virtual machines but share same OS kernel </div></li><li><div>Docker uses LXC containers -- a high level tool for </div></li></ul><li><div>Operating Systems</div></li><ul><li><div>2 parts </div></li><ul><li><div>OS kernel -- interacts with underlying hardware  </div></li><li><div>Software -- software above it makes them unique: drivers, compilers, file managers etc </div></li></ul></ul><li><div>Sharing the kernel </div></li><ul><li><div>docker uses the base OS kernel, but switches out the overlaying software to be whatever you like </div></li><li><div>each container just hosts extra software for that OS </div></li></ul><li><div>Docker on windows</div></li><ul><li><div>you are running a linux container on a linux virtual machine on a windows machine</div></li></ul><li><div>Virtual machines vs Docker</div></li></ul><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 210px;"></col><col style="width: 274px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; background-color: rgb(253, 123, 57); border: 1px solid rgb(246, 84, 3); width: 210px; padding: 8px;"><div style="text-align: center;"><span style="color: rgb(255, 255, 255);">Virtual Machine</span></div><ul><li><div style="text-align: center;"><span style="color: rgb(255, 255, 255);">More Space + Overhead</span></div></li><li><div style="text-align: center;">GB in size</div></li></ul></td><td style="vertical-align: middle; background-color: rgb(0, 129, 194); border: 1px solid rgb(0, 103, 155); width: 274px; padding: 8px;"><div style="text-align: center;"><span style="color: rgb(255, 255, 255);">Docker</span></div><ul><li><div style="text-align: center;"><span style="color: rgb(255, 255, 255);">Less Space + Overhead</span></div></li><li><div style="text-align: center;">MB in size</div></li><li><div style="text-align: center;">Restricts to a single OS</div></li></ul></td></tr><tr><td style="background-color: rgb(254, 222, 193); border: 1px solid rgb(253, 175, 105); width: 210px; padding: 8px;"><div>Virtual Machine</div><ul><li><div>Application</div></li><ul><li><div>Library</div></li><li><div>Dependencies</div></li><ul><li><div>OS</div></li></ul></ul></ul></td><td style="background-color: rgb(205, 230, 249); border: 1px solid rgb(124, 190, 239); width: 274px; padding: 8px;"><div>Container</div><ul><li><div>Application</div></li><ul><li><div>Library</div></li><li><div>Dependencies</div></li></ul></ul></td></tr><tr><td style="background-color: rgb(254, 222, 193); border: 1px solid rgb(253, 175, 105); width: 210px; padding: 8px;"><div><br/></div></td><td style="background-color: rgb(205, 230, 249); border: 1px solid rgb(124, 190, 239); width: 274px; padding: 8px;"><div>Docker</div></td></tr><tr><td style="background-color: rgb(254, 222, 193); border: 1px solid rgb(253, 175, 105); width: 210px; padding: 8px;"><div>Hypervisor</div></td><td style="background-color: rgb(205, 230, 249); border: 1px solid rgb(124, 190, 239); width: 274px; padding: 8px;"><div>OS </div></td></tr><tr><td style="background-color: rgb(254, 222, 193); border: 1px solid rgb(253, 175, 105); width: 210px; padding: 8px;"><div>Hardware Infrastructure</div></td><td style="background-color: rgb(205, 230, 249); border: 1px solid rgb(124, 190, 239); width: 274px; padding: 8px;"><div>Hardware Infrastructure</div></td></tr></tbody></table><ul><ul><li><div>Can combine virtual machine and dockers </div></li></ul><li><div>Dockerhub </div></li><ul><li><div>public registry of images </div></li></ul><li><div>Image</div></li><ul><li><div>package template plan </div></li></ul><li><div>Container</div></li><ul><li><div>Runs instances of the image</div></li><li><div>an image can be run on many containers </div></li><li><div>Image can be used to deploy an application in production </div></li><li><div>meant to run a specific process-- computation, task, etc </div></li><ul><li><div>after completion of process it exits </div></li><li><div>exists only as long as process is alive </div></li></ul></ul><li><div>Commands </div></li><ul><li><div>run - docker run &lt;image name&gt; </div></li><ul><li><div>runs image if on host, will pull from docker hub otherwise </div></li><li><div>-d -- detach from cmd</div></li><ul><li><div>docker attach &lt;id&gt; -- undoes detach of container </div></li></ul><li><div>-i -- interactive mode </div></li><li><div>-it -- interactive mode and attached to the container terminal </div></li><li><div> </div></li></ul><li><div>ps - list of currently running containers</div></li><li><div>ps -a -- list of all containers</div></li><li><div>stop &lt;container name/ ID&gt; - stops the container from running/ exits </div></li><li><div>rm &lt;container name/ ID&gt; - removes container </div></li><li><div>images - list of available images </div></li><li><div>docker rmi &lt;image name&gt; -- removes image</div></li><li><div>pull &lt;image&gt; -- pulls image and starts it on host </div></li><li><div>exec- docker exec containername /file/path --&gt; shows the file path inside that running container</div></li><li><div><br/></div></li></ul><li><div>Port mapping </div></li><ul><li><div>Two ports exist : one of the container and one of the local host </div></li><ul><li><div>each docker container has an internal IP : can access an application by going to internal IP.port if on local host </div></li><ul><li><div>This IP is not accessible outside of local host </div></li></ul><li><div>connect a local host port to the container IP.port </div></li></ul><li><div>run -p localport:dockerport image</div></li></ul><li><div>Volume mapping </div></li><ul><li><div>Goal is to make data persistent across container</div></li><li><div>file changes to data in container get saved to changes on local host </div></li><ul><li><div>CONTAINER HAS NO PLACE TO SAVE WHEN CLOSED - IT ONLY EXISTS ON HOST </div></li></ul><li><div>run - v local/host/filepath:/docker/file/path image</div></li></ul><li><div>Container details </div></li><ul><li><div>docker inspect &lt;container name&gt;</div></li><ul><li><div>returns the following info:</div></li><ul><li><div>id </div></li><li><div>name </div></li><li><div>path</div></li><li><div>args</div></li><li><div>data mounts</div></li><li><div>entrypoints </div></li><li><div>network settings</div></li><li><div>environment variable (under config)</div></li></ul></ul><li><div>docker log container name to get stdout of the container that has been detached </div></li></ul><li><div>Environment variables :To run images with different variable settings</div></li><ul><li><div>Ex. changing the background color of a page </div></li></ul></ul><div><br/></div></div><div>app.py</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>import os </div><div>from flask import flask</div><div><br/></div><div>app=Flask(__name__)</div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">#This would be a static variable -- to change the image would have to be rebuilt </span></div><div>#color= red</div><div><br/></div><div>#Using Environment variables </div><div>color=os.environ.get(&quot;APP_&quot;COLOR&quot;)</div></div><div><br/></div><div>For local run : Next time before running set variable value</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>export APP_COLOR=blue ;  app.py </div></div><div>For Docker run : </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run -e APP_COLOR=blue imagetorunname</div></div><div><br/></div><div><br/></div><ul><li><div>Creating your own image</div></li><ul><li><div>Create your customized environment for the project </div></li></ul></ul><ol><li><div>Make list of what you would do on a local machine </div></li></ol><div>EXAMPLE </div><ol start="2"><li><div>Set up OS - Ubuntu</div></li><li><div>Update repo </div></li><li><div>install dependencies </div></li><li><div>install python </div></li><li><div>copy source code to folder </div></li><li><div>run the source code </div></li></ol><div><br/></div><ol start="2"><li><div>Create a dockerfile to run steps (Filename: Dockerfile ** D capitalized and no file extension) </div></li></ol><div>Dockerfile</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>FROM Ubuntu</div><div><br/></div><div>RUN apt-get update</div><div>RUN apt-get install python </div><div><br/></div><div>RUN pip install flask </div><div>RUN pip install flask-mysql </div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">COPY . /opt/source-code </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">ENTRYPOINT FLASK_APP=/opt/source-code/app.py flask run </span></div></div><div><br/></div><div><br/></div><ul><li><div>FROM - all docker files must start with FROM command </div></li><ul><li><div>Start a base OS or start from another image </div></li></ul><li><div>RUN - installs dependencies </div></li><li><div>COPY - copies source code </div></li><li><div>ENTRYPOINT - specifies command when image run as container  </div></li><li><div>Layers</div></li><ul><li><div>Each instruction is run as a layer</div></li><li><div>To see docker layers and sizes</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker history &lt;imagename&gt;</div></div><ul><ul><li><div><span style="font-weight: bold;">keep layers most likely to change at bottom of docker file </span></div></li><ul><li><div>Docker will use cached layers until changed layer occurs </div></li><ul><li><div>speeds up build process </div></li></ul></ul></ul></ul><ol start="3"><li><div>Build the image (on local host)</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker build Dockerfile -t my_custom_app:tag</div></div><ol start="4"><li><div>publish image for others </div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker push acctname/imagename</div></div><div><br/></div><div><br/></div><ul><li><div>CMD vs ENTRYPOINT </div></li><ul><li><div>Images have CMD arguments at the end for it to run </div></li><li><div>To override default command in Image </div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run [COMMAND] </div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker run ubuntu sleep 5 </span></div></div><ul><ul><li><div>To specify CMD command in docker file : Two options</div></li><ul><li><div>CMD command param </div></li></ul></ul></ul><div>                                                    OR</div><ul><ul><ul><li><div>CMD [&quot;command&quot;, &quot;param&quot;] </div></li><ul><li><div>will send to CMD in json format : command/executable must be separate from the parameter</div></li></ul></ul><li><div>CMD allows for hard coded commands that should be run at the beginning everytime --- no flexiblity in param</div></li></ul><li><div>ENTRYPOINT : </div></li><ul><li><div>appends run param with entrypoint command </div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>{Dockerfile}</div><div>FROM Ubuntu</div><div>ENTRYPOINT [&quot;sleep&quot;] </div></div><div>to run </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run ubuntu-sleeper 10 </div></div><div>command at startup will be </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>sleep 10</div></div><div><br/></div><div>to set a default value for the entrypoint command : </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>{Dockerfile}</div><div>FROM Ubuntu</div><div>ENTRYPOINT [&quot;sleep&quot;]</div><div>CMD [&quot;5&quot;]</div></div><div> to specify the entrypoint at runtime</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run --entrypoint newentrypoint imagename entrypointparam</div></div><div><br/></div><div><br/></div><ul><li><div>Networking</div></li><ul><li><div>3 default networks </div></li><ul><li><div>Bridge {docker run Ubuntu)</div></li><ul><li><div>private internal network </div></li><li><div>containers can access eachother using internal ids</div></li><li><div>map to local ports to access externally</div></li></ul><li><div>host (docker run Ubuntu --network=host)</div></li><ul><li><div>takes out network isolation </div></li><li><div>no port mapping needed</div></li><li><div>cannot reuse ports as ports are now the same on the same host </div></li></ul><li><div>none (docker run Ubuntu --netrwork=none) </div></li><ul><li><div>isolated network-- no connections</div></li></ul></ul><li><div>User defined network </div></li><ul><li><div>specify an additional network than the one default bridge network</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker network create --driver bridge --subnet 182.18.0.0/16 networkname</div></div><div><br/></div><ul><ul><li><div>Getting network info</div></li><ul><li><div>Getting list of all networks </div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker network ls </div></div><ul><ul><ul><li><div><span style="font-weight: bold;">   </span> getting IP and more</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker inspect networkname</div></div><ul><ul><li><div>Docker embedded DNS</div></li><ul><li><div>A container when rerun- may not receive the same IP address everytime</div></li><li><div>can specify a container name in place of an IP to make sure docker connects to the right place everytime</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>#EXAMPLE </div><div>mysql.connect(193.83.93) </div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">#would change to </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">mysql.connect (mysql) </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">#mysql is the container name </span></div></div><div><br/></div><ul><li><div>Docker storage driver/file systems </div></li><ul><li><div>Storage drivers are chosen based on OS </div></li><li><div>For two dockerfiles that share the same top layers- docker will reuse the higher layers from cache, and only build the newer layers </div></li><ul><li><div>*Structure your dockerfiles similiarly to save the most build time! </div></li><li><div>Image layers are non-permutable (READ ONLY) so any changes to the said build will require a rebuild </div></li></ul><li><div>Container run </div></li><ul><li><div>Adds a layer ontop of the image layers (READ WRITE)</div></li><li><div>layer removed when the container stops </div></li><li><div>IF trying to modify a src code in IMAGE layer</div></li><ul><li><div>Docker has copy on write mechanism</div></li><li><div>if file is changed, the file is copied to the container layer and then that version is changed</div></li><ul><li><div>Changed version is deleted when the container stops </div></li></ul></ul></ul><li><div>Volumes :Volume Mounting</div></li><ul><li><div>Persistent data storage for a container </div></li><li><div>Will save to /var/lib/docker/ volumes/data_volume </div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"># the volume create command is optional: docker will create a new volume if specified in run command </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker volume create volumename </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker run -v volumename:/docker/file/path imagename</span></div></div><ul><ul><li><div>Bind Mount</div></li><ul><li><div>Mounts a host filepath that is NOT in the docker/volumes/data_volumes location </div></li><li><div>--mount is the more verbose and preferred way</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run --mount type=bind, source=/data/mysql, target=/var/lib/mysql &lt;image&gt;</div></div><ul><li><div>Docker compose </div></li><ul><li><div>to run multiple containers for different parts in one go </div></li></ul></ul><div>docker-compose.yml</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>services:</div><div>    web:</div><div>        image: &quot;webapp&quot;</div><div>    database:</div><div>        image: &quot;mongodb&quot;</div><div>    messaging</div><div>        image: &quot;redis:alpine&quot;</div><div>    orchestration</div><div>        image: &quot;ansible&quot;</div></div><ul><li><div>Using individual images -- link the individual images</div></li><ul><li><div>MAY BE DEPRECATED</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run -d --name=redis redis </div><div>docker run -d --name=db postgres:9.4 --link db:db</div><div>docker run -d --name=vote -p 5000:80 --link redis:redis voting_app #python UI for vote capture # link format containername:namehostislookingfor</div><div>docker run -d --name=result -p 5001:80 # nodejs page to post results </div><div>docker run -d --name=workeer worker --link redis:redis ---link db:db</div></div><ul><li><div>Linking with Docker compose file:</div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>services:</div><div>    redis:</div><div>        image: redis</div><div>    db:</div><div>        image: DB</div><div>    vote:</div><div>        image: voting-app</div><div>        ports:</div><div>            - 5000:80</div><div>        links:</div><div>            -redis</div><div>    result:</div><div>        image: result-app</div><div>        ports:</div><div>            -5001:80</div><div>        links:</div><div>            -db</div><div>    worker:</div><div>        image:worker</div><div>        links:</div><div>            -redis</div><div>            -db</div></div><div><br/></div><div>bring up full stack </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker-compose up </span></div></div><div><br/></div><ul><li><div>What if image is not a registered docker hub image? How to use local images for build </div></li><ul><li><div>switch image: to build and provide filepath for image files </div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>services:</div><div>    redis:</div><div>        image: redis</div><div>    db:</div><div>        image: DB</div><div>    vote:</div><div>        build: ./vote</div><div>        ports:</div><div>            - 5000:80</div><div>        links:</div><div>            -redis</div><div>    result:</div><div>        build: ./result</div><div>        ports:</div><div>            -5001:80</div><div>        links:</div><div>            -db</div><div>    worker:</div><div>        build: ./worker</div><div>        links:</div><div>            -redis</div><div>            -db</div></div><div><br/></div><ul><li><div>Dockercompose file versions</div></li><ul><li><div>file above is :version1 </div></li></ul></ul><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 262px;"></col><col style="width: 340px;"></col><col style="width: 340px;"></col></colgroup><tbody><tr><td style="width: 262px; padding: 8px; border: 1px solid;"><div>Version1</div></td><td style="width: 340px; padding: 8px; border: 1px solid;"><div>Version2</div><ul><li><div>Specify version number in first line </div></li><li><div>creates a dedicated network for this application and no links are needed </div></li><li><div>Specify order of starting</div></li></ul></td><td style="width: 340px; padding: 8px; border: 1px solid;"><div>Version3</div><ul><li><div>Uses Docker Swarm</div></li></ul></td></tr><tr><td style="width: 262px; padding: 8px; border: 1px solid;"><div>redis:</div><div>        image: redis</div><div>    db:</div><div>        image: DB</div><div>    vote:</div><div>        build: ./vote</div><div>        ports:</div><div>            - 5000:80</div><div>        links:</div><div>            -redis</div><div>    result:</div><div>        build: ./result</div><div>        ports:</div><div>            -5001:80</div><div>        links:</div><div>            -db</div><div>    worker:</div><div>        build: ./worker</div><div>        links:</div><div>            -redis</div><div>            -db</div></td><td style="width: 340px; padding: 8px; border: 1px solid;"><div><span style="font-weight: bold;">version : 2</span></div><div><span style="font-weight: bold;">services:</span></div><div>    redis:</div><div>        image: redis</div><div>    db:</div><div>        image: DB</div><div>    vote:</div><div>        build: ./vote</div><div>        ports:</div><div>            - 5000:80</div><div>      <span style="font-weight: bold;">  depends_on:</span></div><div><span style="font-weight: bold;">           -redis</span></div><div><br/></div><div>    result:</div><div>        build: ./result</div><div>        ports:</div><div>            -5001:80</div><div>    worker:</div><div>        build: ./worker</div></td><td style="width: 340px; padding: 8px; border: 1px solid;"><div>version: 3 </div><div>services: </div><div>   redis:</div><div>      image: redis </div><div>   db</div><div>      image: postgres</div><div>   vote:</div><div>      image: voting-app</div><div>      ports:</div><div>         -5000:80</div><div><br/></div></td></tr></tbody></table><ul><li><div>Specify/ allocate networks </div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>version : 2</div><div>services:</div><div>    redis:</div><div>        image: redis</div><div>    db:</div><div>        image: DB</div><div>        networks:</div><div>            -back-end</div><div>    vote:</div><div>        build: ./vote</div><div>        ports:</div><div>            - 5000:80</div><div>        depends_on:</div><div>           -redis</div><div>        networks:</div><div>            -front-end</div><div>            -back-end</div><div><br/></div><div><br/></div><div>    result:</div><div>        build: ./result</div><div>        ports:</div><div>            -5001:80</div><div>        networks:</div><div>            -front-end</div><div>            -back-end</div><div>    worker:</div><div>        build: ./worker</div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">networks:</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">    front-end:</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">    back-end: </span></div></div></div><ul><li><div>Docker register</div></li><ul><li><div>image names</div></li><ul><li><div>useracct/imagerepository</div></li><li><div>ex. nginx/nginx</div></li></ul><li><div>Private Registry</div></li><ul><li><div>can be on GCP, AWS etc </div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker login private-registry.io</div><div>&gt; username :</div><div>&gt;password : </div><div>&gt;&gt;login succeeded</div><div><br/></div><div>docker run private-registery.io/apps/internal-app</div></div><div><br/></div><ul><ul><li><div>for an internal private registry : deploy the registry image </div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run -d -p 5000:5000 --name registry registry:2</div></div><ul><ul><li><div>to push image to private registry</div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker image tag my-image localhost:5000/my-image</div><div>#from same host as registry</div><div>docker push localhost:5000/my-image</div><div>docker pull localhost:5000/my-image</div><div>#from separate host as registry</div><div>docker pull ipaddresshere:5000/my-image</div></div><div><br/></div><ul><li><div>Docker Engine</div></li><ul><li><div>Docker Engine: A host with docker installed</div></li><li><div>3 Parts </div></li><ul><li><div>Deamon - background process manages docker objects</div></li><li><div><span style="font-style: italic;">REST API - interface to talk to deamon</span></div></li><li><div><span style="font-style: italic;">Docker CLI - command line interface --&gt; uses REST API to talk to deamon</span></div></li></ul><li><div>Deamon can be run on a differnt machine than the other two parts </div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker -H=remote-docker-engine:port</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker -H=10.123.2.1:2375 run nginx</span></div></div><ul><ul><li><div>Containerization</div></li><ul><li><div>each one gets its own namespace </div></li><li><div>renames a process and adds to the host processes list </div></li></ul><li><div>cgroups </div></li><ul><li><div>a container could use all the host resources </div></li><li><div>No hard limit </div></li><li><div>--cpus=.5 image with limit the % of CPU container can use </div></li><li><div>--memory=100m limits the memory the container can use </div></li></ul></ul><li><div>Docker on Windows</div></li><ul><li><div>Docker Toolbox :</div></li><ul><li><div>launch a virtual machine on your windows machine, install docker on virtual machine</div></li><li><div>Docker toolbox did all of these things </div></li></ul><li><div>Docker Desktop: </div></li><ul><li><div>Hyper-v -- builds the linux virtual machine </div></li></ul><li><div>* Default for builds is to create a linux system on a windows machine </div></li><li><div>Windows Containers </div></li><ul><li><div>Can change to windows containers option</div></li><ul><li><div>Click on the docker icon : Change to windows container option</div></li></ul><li><div>Two kinds of Windows Containers</div></li><ul><li><div>Windows Server </div></li><ul><li><div>Each container uses the host kernel </div></li></ul><li><div>Hyper-V isolation</div></li><ul><li><div>Each container runs its own kernel</div></li></ul></ul><li><div>Images for Windows </div></li><ul><li><div>Windows Server Core</div></li><li><div>Nano Server (lightweight version of Windows Server Core) </div></li></ul><li><div>VirtualBox or HyperV </div></li><ul><li><div>Can only use one on a single host </div></li><li><div>Migration guide can help switch from one to another </div></li></ul></ul></ul><li><div>Mac</div></li><ul><li><div>Docker ToolBox</div></li><ul><li><div>Uses Virtual Box to create linux container</div></li></ul><li><div>Docker Desktop for Mac </div></li><ul><li><div>Hyperkit vitualization used to create Linux container</div></li></ul><li><div>No Mac Based images or containers exist currently </div></li></ul><li><div>Containter Orchestration </div></li><ul><li><div>How to create/remove  instances of a program as demand increases/decreases</div></li><li><div>How to create more hosts for a program such that if one host fails the application is still live </div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>#create 100 instances of the container</div><div>docker service create --replicas=100 nodejs</div></div><ul><li><div>Solution Options: Pros and Cons</div></li><ul><li><div>Docker Swarm : Docker Solution</div></li><ul><li><div>Lacks advanced features for production level </div></li></ul><li><div>Kubernetes : Google Solution </div></li><ul><li><div>Supported on GCP, Azure and AWS </div></li></ul><li><div>Mesos: Apache Solution </div></li><ul><li><div>Difficult to set up </div></li></ul></ul><li><div>Docker Swarm </div></li><ul><li><div>Combine multiple docker hosts to create a cluster</div></li></ul></ul><ol><li><div>Need multiple hosts with docker </div></li><li><div>Set one as swarm manager ; others will be workers (nodes)</div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">#on swarm manager</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker swarm init </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">#on worker hosts</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">docker swarm join --token &lt;token&gt;</span></div></div></div><ol start="4"><li><div>to run multiple instances of an application</div></li></ol><div>Must be run on manager node</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker service create --replicas=3 &lt;image&gt;</div></div><ul><li><div>Kubernetes </div></li><ul><li><div>Can handle actions such as start 1000 instances, scale up to 2000 and automatically update based on load </div></li><li><div>POD autoscalers </div></li><li><div>Cluster Autoscale</div></li><li><div>Any network or storage brands have kubernetes support </div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>kubetcl run --replicas=1000 &lt;image&gt;</div><div>kubectl scale --replicas=2000 &lt;image&gt;</div><div>kubectl rolling-update mywebserver --image=mywebserver:2</div></div><ul><ul><li><div>Node</div></li><ul><li><div>single host with containers</div></li></ul><li><div>Cluster </div></li><ul><li><div>Many nodes are put together to create a cluster</div></li></ul><li><div>Master </div></li><ul><li><div>watches over nodes in the cluster and orchestrates the multiple nodes </div></li></ul><li><div>Parts of Kubernetes</div></li><ul><li><div>API server - CLI , interaction</div></li><li><div>etcd - Key value store , stores all node data on all nodes in distributed manner</div></li><li><div>scheduler- distributing work for containers across all nodes </div></li><li><div>controllers- notice and monitors when nodes go down</div></li><li><div>Container runtime - underlying software to run containers </div></li><li><div>Kubelet - runs on each node in cluster</div></li></ul><li><div>kubectl </div></li><ul><li><div>Kube control tool </div></li><li><div>run - runs app on cluster</div></li><li><div>cluster-info -- returns info on cluster </div></li><li><div>get nodes -- returns list all nodes in cluster  </div></li></ul></ul></ul><div><br/></div></div><hr/><div>  </div><div><span style="font-weight: bold; font-size: 16pt;">Customizable DataScience Docker Container: Quick and Easy</span></div><ol><li><div>Create Docker account</div></li><li><div>install docker for your os</div></li><li><div>open CLI : type docker --&gt; should see docker command list </div></li></ol><div><br/></div><div><br/></div><div>Sample Dockerfile</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: &quot;Courier New&quot;;"># Use Ubuntu Image as base for new image</span></div><div><span style="font-family: &quot;Courier New&quot;;">FROM ubuntu:latest </span></div><div><br/></div><div><span style="font-family: &quot;Courier New&quot;;">#Run a system update &amp;&amp; install python 3 &amp;&amp; install pip3</span></div><div><span style="font-family: &quot;Courier New&quot;;">RUN apt-get update &amp;&amp; apt-get install -y python3 \</span></div><div><span style="font-family: &quot;Courier New&quot;;">    python3-pip</span></div><div><br/></div><div><span style="font-family: &quot;Courier New&quot;;">#install jupyter </span></div><div><span style="font-family: &quot;Courier New&quot;;">RUN pip3 install jupyter</span></div><div><br/></div><div><span style="font-family: &quot;Courier New&quot;;">#install Numpy</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;;">RUN pip3 install numpy</span></div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: &quot;Courier New&quot;;">#install Statsmodel</span></div><div>RUN pip3 install statsmodel</div><div><br/></div><div>#install matplotlib</div><div>RUN pip3 install matplotlib</div><div><br/></div><div><br/></div><div>#install plotly</div><div>RUN pip3 install plotly</div><div><br/></div><div>#install Seaborn</div><div>RUN pip3 install seaborn</div><div> </div><div>#install sklearn</div><div>RUN pip3 install sklearn</div><div><br/></div><div>#install Tensorflow</div><div>RUN pip3 install tensorflow</div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"># Create new system user </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">RUN useradd -ms /bin/bash jupyter </span></div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"># change to this user </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">USER jupyter</span></div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"># set container working dir  to user home </span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">WORKDIR /home/jupyter </span></div><div><br/></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">#Start Jupyter notebook</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">ENTRYPOINT [&quot;jupyter&quot;,&quot;notebook&quot;,&quot;--ip=*&quot;]</span></div></div><div><br/></div><div>To build image: </div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker build -t datascience-notebook . </div></div><div><br/></div><ul><li><div>was 1.66 GB </div></li></ul><div>Add volume to create persistent storage outside of container</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker volume create --name notebooks</div></div><div>to run : </div><ul><li><div>it -- interactive bash in container </div></li><li><div>p expose jupyter port </div></li><li><div>d - detach from cmd </div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker run -it -d -v notebooks:/home/jupyter -p 8888:8888 datascience-notebook</div></div><div><br/></div><div>to stop container: find active containers, and stop </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>docker ps </div><div>docker stop &lt;container name&gt;</div></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 